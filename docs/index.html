<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>Ramble API</title>
	<link href="http://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet" type="text/css">
	<link href="/style.css" rel="stylesheet" type="text/css">

	<link rel="stylesheet" href="http://yandex.st/highlightjs/7.0/styles/monokai.min.css">
	<script src="http://yandex.st/highlightjs/7.0/highlight.min.js"></script>
</head>
<body>
	<div class="container">
		<header id="main-header">
			<div class="main-logo"><a href="/">Ramble</a></div>
			<div class="main-tagline">by Strabo</div>
		</header>
		<article>
			<h1>Ramble API Documentation</h1>
			<p>The Ramble API, created by Strabo with intent for NatureShare integration, consists of an iOS video recorder module,
			a server-side video encoding and storage as well as a JavaScript client-side library for viewing Ramble videos in browser.</p>
			<p>The server-side component, written in Ruby on Rails, is designed to be as modular as possible. The server receives uploads
			from the iOS application in the form of a POST request. The server then sends these videos to Panda Encoding through Amazon S3.
			After the Panda API finishes transcoding the videos, they are stored permanently on a S3 Bucket, where the videos and the
			geographic information may be server back to the client-side viewer.</p>
			<p>The client-side component, written in the form of a JavaScript library using several HTML5 APIs manages playback of the Ramble
			videos. This library requires Leaflet maps for playback. Applications using the Ramble web player should be written in JavaScript
			and can leverage the methods defined in the public API.</p>
			<h5>Coming Features:</h5>
			<ul>
				<li>Finish Clustering Pins that are Geographically Close</li>
			</ul>
			<p>Use of this API is only available with written consent from Strabo, LLC.</p>

			<h2>Implement the JavaScript API</h2>
			<p>The Strabo Javascript API is built off of:</p>
			<ul>
				<li><a href="http://jquery.com" target="_blank">jQuery</a></li>
				<li><a href="http://leaflet.cloudmade.com" target="_blank">Leaflet Maps</a></li>
			</ul>
			<p>You must first include jQuery and Leaflet in your code in order to use functions in the Ramble API.</p>
			<pre><code class="html">&lt;!-- include relevant libraries (jquery and leaflet) --&gt;
&lt;script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4.4/leaflet.css" /&gt;
&lt;!--[if lte IE 8]&gt;
    &lt;link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4.4/leaflet.ie.css" /&gt;
&lt;![endif]--&gt;
&lt;script src="http://cdn.leafletjs.com/leaflet-0.4.4/leaflet.js"&gt;&lt;/script&gt;</code></pre>
			<p>Include the Ramble JavaScript API using the following line of Code.</p>
			<pre><code class="html">&lt;script src="http://api.strabo.co/build/ramble.min.js" type="text/javascript"&gt;&lt;/script&gt;</code></pre>

			<p>Include the Ramble CSS Stylesheet using the following line of Code. To modify the appearance of the video player, the Ramble stylesheet may be downloaded and modified.</p>
			<pre><code class="html">&lt;link href="http://api.strabo.co/build/ramble.min.css" rel="stylesheet" type="text/css" /&gt;</code></pre>


			<p>Initialize Leaflet Maps. A simple Leaflet map instance can be generated below. For more information, see the <a target="_blank" href="http://leaflet.cloudmade.com/">
			Leaflet website and API</a>. Note, the Ramble JavaScript API does not include the Leaflet API.
			</p>
			<pre><code class="javascript">// initialize the map on the "map" div
var map = new L.Map('map');

// create a CloudMade tile layer with style #997 (or use other provider of your choice)
var openCycleMap = new L.TileLayer('http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png');

// add the layer to the map
map.addLayer(openCycleMap);
</code></pre>

			<p>Using a list of tokens supplied from your server, initialize the Ramble videos.</p>
			<pre><code class="javascript">var tokens = ["e5aad1b391f4def639a30fd387ea7e51","3f96474a8a03ebc48f402b43d150a9fa"];
list = new S.RambleList(map,tokens);</code></pre>


			<p>Once initialized, Ramble Videos can be manipulated using the API below.</p>

			<h2>Custom Styling</h2>
			The stylesheet for the SDK can be downloaded below. The stylesheet controls much of the marker/popup styling. Other components, like the marker can be changed through passing a custom marker to a S.Marker during construction. Leaflet has a great <a href="http://leaflet.cloudmade.com/examples/custom-icons.html" target="_blank">tutorial</a> for how to do this.

			<a href="http://api.strabo.co/build/ramble.min.css">ramble.css</a>
			<h2>API Reference</h2>

			<ul class="toc">
				<li><a href="#ramblelist">S.RambleList</a></li>
				<li><a href="#ramble">S.Ramble</a></li>
				<li><a href="#marker">S.Marker</a></li>
				<li><a href="#config">S.Config</a></li>
				<li><a href="#util">S.Util</a></li>

			</ul>
			<h3 id="ramblelist" class="subheading">S.RambleList</h3>
			<p>A RambleList an object used to store and manipulate multiple Rambles. It provides much of the same functionality that an individual Ramble would provide.</p>
			<h4 id="ramblelist_constructor">Constructor</h4>
			<table>
				<tr>
					<th>Method</th>
					<th>Parameters</th>
					<th>Description</th>
				</tr>
				<tr>
					<td><code>new S.RambleList</code></td>
					<td><code><ul>
						<li>&lt;<a target="_blank" href="http://leaflet.cloudmade.com/reference.html#map">L.Map</a>&gt; map</li>
						<li>&lt;<a target="_blank" href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/">Array</a>&gt; ids</li>
						<li>&lt;<a href="#ramblelist_options">RambleList Options</a>&gt; options</li>
					</ul></code></td>
					<td>Creates a new <a href="#ramblelist">S.RambleList</a> that is linked to an instance of a Leaflet Map. A S.Ramble will be added to the list for each ID passed in as a parameter.</td>
				</tr>
			</table>
			<h4 id="ramblelist_options">Options</h4>
			<table>
				<tr>
					<th>Option</th>
					<th>Type</th>
					<th>Default Value</th>
					<th>Description</th>
				</tr>
				<tr>
					<td><code>clustering</code></td>
					<td><code><a target="_blank" href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean/">Boolean</a></code></td>
					<td><code>false</code></td>
					<td>Determines whether Markers in an S.RambleList should cluster together if they are nearby on the map.</td>
				</tr>
				<tr>
					<td><code>showRoutes</code></td>
					<td><code><a target="_blank" href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean/">Boolean</a></code></td>
					<td><code>false</code></td>
					<td>Determines whether the ramble should show its route on the page load or only when the marker has been clicked.</td>
				</tr>
			</table>
			<h4 id="ramblelist_events">Events</h4>
			<table>
				<tr>
					<th>Event</th>
					<th>Data</th>
					<th>Description</th>
				</tr>
				<tr>
					<td><code>constructed</code></td>
					<td><code>Event</code></td>
					<td>Triggered when the RambleList is constructed.</td>
				</tr>
				<tr>
					<td><code>geodatapulled</code></td>
					<td><code>Event</code></td>
					<td>Fired when all rambled have been initialized inside of the RambleList.</td>
				</tr>
				<tr>
					<td><code>show</code></td>
					<td><code>Event</code></td>
					<td>Fired when the RambleList is made visible.</td>
				</tr>
				<tr>
					<td><code>hide</code></td>
					<td><code>Event</code></td>
					<td>Fired when the RambleList is hidden.</td>
				</tr>
				<tr>
					<td><code>cluster</code></td>
					<td><code>Event</code></td>
					<td>Fired when the markers in a RambleList cluster.</td>
				</tr>
			</table>
			<h4 id="ramblelist_methods">Methods</h4>
			<table>
				<tr>
					<th>Method</th>
					<th>Parameters</th>
					<th>Returns</th>
					<th>Description</th>
				</tr>
				<tr>
					<td><code>show</code></td>
					<td><code>&nbsp;</code></td>
					<td><code>&nbsp;</code></td>
					<td>Shows all Rambles in the RambleList</td>
				</tr>
				<tr>
					<td><code>hide</code></td>
					<td><code>&nbsp;</code></td>
					<td><code>&nbsp;</code></td>
					<td>Hides all Rambles in the RambleList</td>
				</tr>
				<tr>
					<td><code>findRambleByToken</code></td>
					<td><code>&lt;<a target="_blank" href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/">String</a>&gt; token</code></td>
					<td><code>&lt;<a target="_blank" href="#ramble">S.Ramble</a>&gt; ramble</code></td>
					<td>Searche the RambleList for an instance of a Ramble by a given token parameter.</td>
				</tr>
			</table>


			<h3 id="ramble" class="subheading">S.Ramble</h3>
			<p>A S.Ramble is the principal class for storing geographic and video information about a particular capture. It controls playback as well as storage for a video and extends off of the Leaflet maps L.Popup class. It is inherently bound to a Marker that moves across the map in conjunction with the playback of the associated video.</p>
			<h4 id="ramble_constructor">Constructor</h4>
			<table>
				<tr>
					<th>Method</th>
					<th>Parameters</th>
					<th>Description</th>
				</tr>
				<tr>
					<td><code>new S.Ramble</code></td>
					<td><code><ul>
						<li>&lt;<a target="_blank" href="http://leaflet.cloudmade.com/reference.html#map">L.Map</a>&gt; map</li>
						<li>&lt;<a target="_blank" href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/">String</a>&gt; id</li>
						<li>&lt;<a href="#ramblelist_options">Ramble Options</a>&gt; options</li>
					</ul></code></td>
					<td>Creates a new S.Ramble that is linked to an instance of a Leaflet Map.</td>
				</tr>
			</table>
			<h4 id="ramble_options">Options</h4>
			<table>
				<tr>
					<th>Option</th>
					<th>Type</th>
					<th>Default Value</th>
					<th>Description</th>
				</tr>
				<tr>
					<td><code>list</code></td>
					<td><code><a href="#ramblelist">S.RambleList</a></code></td>
					<td><code>null</code></td>
					<td>A reference to the RambleList that can manipulate a specific Ramble.</td>
				</tr>
				<tr>
					<td><code>showRoutes</code></td>
					<td><code><a target="_blank" href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean/">Boolean</a></code></td>
					<td><code>false</code></td>
					<td>Determines whether the ramble should show its route on the page load or only when the marker has been clicked.</td>
				</tr>
			</table>
			<h4 id="ramble_events">Events</h4>
			<table>
				<tr>
					<th>Event</th>
					<th>Data</th>
					<th>Description</th>
				</tr>
				<tr>
					<td><code>constructed</code></td>
					<td><code>Event</code></td>
					<td>Fired when a new <a href="#ramble">S.RambleList</a> is initialized</td>
				</tr>
				<tr>
					<td><code>geodatapull</code></td>
					<td><code>Event</code></td>
					<td>Fired when a <a href="#ramble">S.RambleList</a> starts to pull geodata from the server.</td>
				</tr>
				<tr>
					<td><code>geodatapulled</code></td>
					<td><code>Event</code></td>
					<td>Fired when the geodata has been pulled and processed successfully from the server.</td>
				</tr>
				<tr>
					<td><code>timeupdate</code></td>
					<td><code>Event</code></td>
					<td>Fired when the video changes its time.</td>
				</tr>
				<tr>
					<td><code>ended</code></td>
					<td><code>Event</code></td>
					<td>Fired when the video ends.</td>
				</tr>
				<tr>
					<td><code>seeking</code></td>
					<td><code>Event</code></td>
					<td>Fired when seeking for a position in the video.</td>
				</tr>
				<tr>
					<td><code>seeked</code></td>
					<td><code>Event</code></td>
					<td>Fired when a position has been seeked to in the video.</td>
				</tr>
				<tr>
					<td><code>play</code></td>
					<td><code>Event</code></td>
					<td>Fired the video starts playing.</td>
				</tr>
				<tr>
					<td><code>pause</code></td>
					<td><code>Event</code></td>
					<td>Fired when the video is paused.</td>
				</tr>
				<tr>
					<td><code>reset</code></td>
					<td><code>Event</code></td>
					<td>Fired when the video playback is reset to zero.</td>
				</tr>
				<tr>
					<td><code>error</code></td>
					<td><code>Event</code></td>
					<td>Fired when an error occurs in the video.</td>
				</tr>
			</table>
			<h4 id="ramble_methods">Methods</h4>
			<table>
				<tr>
					<th>Method</th>
					<th>Parameters</th>
					<th>Returns</th>
					<th>Description</th>
				</tr>
				<tr>
					<td><code>getType</code></td>
					<td><code>&nbsp;</code></td>
					<td><code>&lt;<a target="_blank" href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/">String</a>&gt; type</code></td>
					<td>Returns <code>video</code> or <code>image</code> depending on the type of the video, or null if the video hasn't been initialized.</td>
				</tr>
				<tr>
					<td><code>show</code></td>
					<td><code>&nbsp;</code></td>
					<td><code>&nbsp;</code></td>
					<td>Shows the marker for the Ramble, but will only show the route if the <code>showRoutes</code> option is enabled.</td>
				</tr>
				<tr>
					<td><code>showWithRoute</code></td>
					<td><code>&nbsp;</code></td>
					<td><code>&nbsp;</code></td>
					<td>Shows the marker and route for the Ramble.</td>
				</tr>
				<tr>
					<td><code>hide</code></td>
					<td><code>&nbsp;</code></td>
					<td><code>&nbsp;</code></td>
					<td>Hides the marker and the route from the map.</td>
				</tr>
				<tr>
					<td><code>reset</code></td>
					<td><code>&nbsp;</code></td>
					<td><code>&nbsp;</code></td>
					<td>Sets the video to its initial state.</td>
				</tr>
				<tr>
					<td><code>getTime</code></td>
					<td><code>&nbsp;</code></td>
					<td><code>&lt;<a target="_blank" href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/">Number</a>&gt; time</code></td>
					<td>Returns the current time of the video playing if the Ramble type is <code>video</code>.</td>
				</tr>
				<tr>
					<td><code>setTime</code></td>
					<td><code>&lt;<a target="_blank" href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/">Number</a>&gt; time</code></td>
					<td><code>this</code></td>
					<td>Sets the current time of the video playing if the Ramble type is <code>video</code>.</td>
				</tr>
				<tr>
					<td><code>play</code></td>
					<td><code>&nbsp;</code></td>
					<td><code>&nbsp;</code></td>
					<td>Plays the video.</td>
				</tr>
				<tr>
					<td><code>pause</code></td>
					<td><code>&nbsp;</code></td>
					<td><code>&nbsp;</code></td>
					<td>Pauses the video.</td>
				</tr>
				<tr>
					<td><code>playPause</code></td>
					<td><code>&nbsp;</code></td>
					<td><code>&nbsp;</code></td>
					<td>Toggles between playing and paused.</td>
				</tr>
				<tr>
					<td><code>addEventListener</code></td>
					<td><code></code></td>
					<td><code></code></td>
					<td>Adds a specific event listener to the <a href="#ramble">S.RambleList</a>.</td>
				</tr>
				<tr>
					<td><code>hasEventListeners</code></td>
					<td><code></code></td>
					<td><code></code></td>
					<td>Removes a specific event listener from the <a href="#ramble">S.RambleList</a>.</td>
				</tr>
				<tr>
					<td><code>removeEventListener</code></td>
					<td><code></code></td>
					<td><code></code></td>
					<td>Checks for a specific event listener.</td>
				</tr>
				<tr>
					<td><code>getLatLng</code></td>
					<td><code></code></td>
					<td><code>&lt;<a target="_blank" href="http://leaflet.cloudmade.com/reference.html#latlng">L.LatLng</a>&gt; latLng</code></td>
					<td>Returns the starting LatLong object for the Ramble.</td>
				</tr>
				<!--
				<tr>
					<td><code></code></td>
					<td><code></code></td>
					<td><code></code></td>
					<td></td>
				</tr>
				-->
			</table>


			<h3 id="marker" class="subheading">S.Marker</h3>
			<p>A <a href="#marker">S.Marker</a> is a customized Leaflet marker that adds rotation to all of the functionality that would ordinarily exist in a Marker object. However, since the Marker is tied so closely to a Ramble object, the marker should not be manipulated directly. As such, most methods that will modify the Marker are called through the Marker's corresponding Ramble object. An <a href="#marker">S.Marker</a> inherits from a <a target="_blank" href="http://leaflet.cloudmade.com/reference.html#marker">L.Marker</a>.</p>
			<p>The <a href="#marker">S.Marker</a> contains several properties that are unique to the Ramble API that allow clustering to occur on the map. If <a target="_blank" href="http://leaflet.cloudmade.com/reference.html#marker">L.Marker</a> objects are used, clustering will not work.</p>
			<h3 id="config" class="subheading">S.Config</h3>
			<p>The config namespace specifies several global configuration objects. Normally, using the default values should be sufficient.</p>
			<h4 id="config_options">Options</h4>
			<table>
				<tr>
					<th>Option</th>
					<th>Type</th>
					<th>Default Value</th>
					<th>Description</th>
				</tr>
				<tr>
					<td><code>BASE_URL</code></td>
					<td><code><a target="_blank" href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/">String</a></code></td>
					<td><code>"/"</code></td>
					<td>A reference to the base of the site.</td>
				</tr>
				<tr>
					<td><code>DATA_URL</code></td>
					<td><code><a target="_blank" href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/">String</a></code></td>
					<td><code>"/data"</code></td>
					<td>A reference to the base of the data storage.</td>
				</tr>
			</table>
			<h3 id="util" class="subheading">S.Util</h3>
			<p>The Util object serves as a helper namespace that stores many static functions as well as constants that are important for the library.</p>

		</article>
	</div>
	<footer>
		&copy; 2012 Strabo, LLC.
	</footer>
	<script type="text/javascript">
		hljs.tabReplace = '    ';
		hljs.initHighlightingOnLoad();
	</script>
</body>
</html>
